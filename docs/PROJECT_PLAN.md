# 🎯 OpenClaw WhatsApp Sales Agent - 项目方案

> 会学习、会成长的 AI 智能销售系统

## 目录

1. [项目简介](#项目简介)
2. [技术选型](#技术选型)
3. [整体架构](#整体架构)
4. [销售流程](#销售流程)
5. [AI 学习系统](#ai-学习系统)
6. [部署架构](#部署架构)
7. [数据存储](#数据存储)
8. [风险合规](#风险合规)
9. [监控运维](#监控运维)
10. [项目阶段](#项目阶段)
11. [成功标准](#成功标准)

---

## 一、项目简介

### 1.1 项目目标

打造一个**会学习、会成长**的 AI 销售助手，通过 WhatsApp 与客户沟通，实现：

- ✅ 自动回复客户咨询
- ✅ 智能识别客户阶段
- ✅ 持续学习优化
- ✅ 长期客户记忆
- ✅ 转化率持续提升

### 1.2 核心价值

| 价值 | 说明 |
|------|------|
| **降本增效** | 替代人工客服，降低成本 |
| **7x24服务** | 全天候自动回复 |
| **持续学习** | 越用越聪明，转化率提升 |
| **数据驱动** | 基于数据分析优化策略 |

---

## 二、技术选型

### 2.1 组件选择

| 组件 | 选择 | 理由 |
|------|------|------|
| **WhatsApp 自动化** | **WAHA Core（免费）** | ✅ REST API 开箱即用、Docker 部署 |
| **AI Agent** | **MiniMax API** | ✅ 免费额度、稳定、速度快 |
| **后端服务** | **Node.js + Express** | ✅ 轻量、文档全 |
| **数据库** | **SQLite** | ✅ MVP 阶段足够、免维护 |
| **部署** | **Docker Compose** | ✅ 一键部署、跨平台 |

### 2.2 为什么选择 WAHA Core？

| 对比维度 | WAHA Core（免费） | GOWA | whatsapp-web.js |
|----------|-------------------|------|----------------|
| **费用** | ✅ 免费 | 免费 | 免费 |
| **REST API** | ✅ 开箱即用 | 需封装 | 需封装 |
| **Docker** | ✅ 支持 | 支持 | 不支持 |
| **多会话** | ✅ 支持 | 支持 | 需自己实现 |
| **维护** | ✅ 官方维护 | 社区维护 | 社区维护 |
| **MCP 支持** | ✅ 原生 | ❌ 无 |
| **语言** | Go | JavaScript |
| **性能** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **Stars** | 3,471 | 21,126 |
| **更新时间** | 今天 | 活跃 |
| **部署** | 单二进制 | 需要 NodeJS |

### 2.3 GOWA MCP 工具列表

#### 📱 连接管理 (5个)
- `whatsapp_connection_status` - 检查连接状态
- `whatsapp_login_qr` - QR 码登录
- `whatsapp_login_with_code` - 配对码登录
- `whatsapp_logout` - 登出
- `whatsapp_reconnect` - 重连

#### 💬 消息发送 (6个)
- `whatsapp_send_text` - 发送文本
- `whatsapp_send_image` - 发送图片
- `whatsapp_send_sticker` - 发送贴纸
- `whatsapp_send_contact` - 发送联系人
- `whatsapp_send_link` - 发送链接
- `whatsapp_send_location` - 发送位置

#### 📋 聊天管理 (5个)
- `whatsapp_list_contacts` - 联系人列表
- `whatsapp_list_chats` - 聊天列表
- `whatsapp_get_chat_messages` - 获取消息
- `whatsapp_download_message_media` - 下载媒体
- `whatsapp_archive_chat` - 归档聊天

#### 👥 群组管理 (13+个)
- `whatsapp_group_create` - 创建群组
- `whatsapp_group_join_via_link` - 加入群组
- `whatsapp_group_leave` - 离开群组
- `whatsapp_group_participants` - 获取成员
- `whatsapp_group_manage_participants` - 管理成员
- ... (更多)

---

## 三、整体架构

```
┌─────────────────────────────────────────────────────────────────┐
│                     OpenClaw AI Sales Agent                        │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                    大脑层                                  │  │
│  │                                                         │  │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  │  │
│  │  │ 阶段识别 │  │ 策略生成 │  │ 学习优化  │  │ 客户档案 │  │  │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘  │  │
│  │                                                         │  │
│  └─────────────────────────────────────────────────────────┘  │
│                            │                                   │
│                            ▼                                   │
│                   MCP Protocol                                  │
│                            │                                   │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                     GOWA MCP Server                      │  │
│  │                                                         │  │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  │  │
│  │  │ 消息发送 │  │ 消息接收 │  │ 群组管理 │  │ 数据查询 │  │  │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘  │  │
│  │                                                         │  │
│  └─────────────────────────────────────────────────────────┘  │
│                            │                                   │
│                            ▼                                   │
│                   WhatsApp                                     │
└─────────────────────────────────────────────────────────────────┘
```

### 3.1 职责分工

| 组件 | 职责 | 不应该 |
|------|------|--------|
| **OpenClaw AI** | 思考、决策、分析 | 不做消息收发 |
| **GOWA** | 执行、收发消息 | 不做决策 |
| **MCP Protocol** | 标准化接口 | - |

### 3.2 数据流

```
客户发送消息
     │
     ▼
GOWA Webhook → OpenClaw AI
     │
     ▼
AI 分析意图 → 生成回复 → 决定策略
     │
     ▼
MCP → GOWA 发送回复
     │
     ▼
客户收到消息
```

---

## 四、销售流程

### 4.1 客户生命周期

```
客户生命周期
│
├── 初次接触 🎯 目标：建立好印象
│   ├── 客户刚加进来
│   ├── 互相还不熟悉
│   ├── AI 策略：友好、专业、不强推
│   ├── 禁忌：不要强推、不要催单
│   └── 话术示例："您好！感谢您的关注，我是XX客服，很高兴为您服务～有什么可以帮您的吗？"
│
├── 建立信任 🎯 目标：耐心解答
│   ├── 客户开始了解产品
│   ├── 可能提一些问题
│   ├── AI 策略：专业、耐心、有同理心
│   ├── 禁忌：不要夸大、不要不耐烦
│   └── 话术示例："了解您的顾虑，这款产品确实适合您的需求，我给您详细介绍一下..."
│
├── 意向确认 🎯 目标：挖掘需求
│   ├── 客户表现出兴趣
│   ├── 可能会问价格、优惠
│   ├── AI 策略：直接、专业、有说服力
│   ├── 禁忌：不要含糊、不要绕弯
│   └── 话术示例："根据您的需求，我推荐A款这款产品，性价比最高，现在下单还有优惠～"
│
├── 促成下单 🎯 目标：消除顾虑
│   ├── 客户已经有购买意向
│   ├── 可能会犹豫
│   ├── AI 策略：紧迫感、稀缺性
│   ├── 禁忌：不要催太急、不要给压力
│   └── 话术示例："这款库存只剩最后3件了，而且今天下单可以享受9折优惠，需要我帮您预留吗？"
│
└── 成交/流失 🎯 目标：复盘学习
    ├── 客户下单了 or 流失了
    ├── AI 策略：分析原因、优化策略
    └── 生成《每周销售分析报告》
```

### 4.2 销售漏斗

```
                    TikTok/广告引流 (1000人)
                           │
                           ▼
                    初次接触 (500人，加了WhatsApp)
                           │
              ┌─────────────┼─────────────┐
              ▼             ▼             ▼
          流失200      继续跟进250      流失50
              │             │
              ▼             ▼
          建立信任    建立信任
          (300人)      (200人)
              │
    ┌─────────┼─────────┐
    ▼         ▼         ▼
 流失100   意向确认   流失50
    │         │
    ▼         ▼
 流失50    促成下单
           (100人)
              │
       ┌──────┴──────┐
       ▼             ▼
    成交60        流失40
       │
       ▼
    复盘学习 → 优化策略
```

---

## 五、AI 学习系统

### 5.1 核心功能

| 功能 | 说明 | 效果 |
|------|------|------|
| **长期记忆** | 追踪每个客户的互动历史 | 越用越了解客户 |
| **阶段识别** | 判断客户当前处于什么阶段 | 精准调整话术 |
| **持续反思** | 每周总结成功/失败案例 | 持续优化策略 |
| **转化率提升** | 从1%逐步提升到15%+ | 越用越聪明 |

### 5.2 学习循环

```
对话 → 执行 → 收集结果 → 分析 → 优化 → 下次对话
   ↑                                                │
   └────────────────────────────────────────┘
```

### 5.3 客户档案

```json
{
  "customer_123": {
    "stage": "建立信任",
    "first_contact": "2026-02-01",
    "total_conversations": 5,
    "interests": ["价格", "质量", "发货时间"],
    "concerns": ["担心假货", "担心售后"],
    "last_interaction": "2026-02-08",
    "trust_level": 7,
    "purchase_probability": 0.6,
    "recommended_approach": "耐心解答、强调正品保障"
  }
}
```

### 5.4 转化率提升路线图

```
转化率
  │
  │                                            ╭────────
15% │                                           ╱    持续学习
    │                                          ╱     自动优化
12% │                                         ╱
    │                                        ╱
 9% │                                       ╱
    │                                      ╱
 6% │                                     ╱
    │                                    ╱
 3% │                                   ╱
    │                                  ╱
 1% │─────────────────────────────────╱───────────────
    └──────┬──────┬──────┬──────┬──────┬──────┬──────→ 时间
         第1周   第2周   第4周   第8周   第12周  第20周
```

---

## 六、部署架构

### 6.1 开发环境

```
本地 Ubuntu 虚拟机
├── Docker Compose
│   ├── GOWA (WhatsApp) - 端口 3000 (REST), 8080 (MCP)
│   └── Redis (缓存)
├── OpenClaw (独立运行)
└── Webhook 接收服务
```

### 6.2 生产环境

```
VPS 云服务器 (Linux)
├── Docker Compose
│   ├── GOWA (WhatsApp) - 端口 3000, 8080
│   ├── Redis (缓存)
│   └── 日志服务
├── OpenClaw (独立运行)
├── Nginx (反向代理 + HTTPS)
└── 监控告警 (简单)
```

### 6.3 Docker Compose 配置

```yaml
version: '3.8'

services:
  gowa:
    image: aldinokemal2104/go-whatsapp-web-multidevice
    container_name: whatsapp-server
    restart: always
    ports:
      - "3000:3000"  # REST API
      - "8080:8080"  # MCP Server
    volumes:
      - whatsapp_data:/app/storages
    environment:
      - APP_PORT=3000
      - APP_HOST=0.0.0.0
      - WHATSAPP_WEBHOOK=https://your-domain.com/webhook
      - WHATSAPP_AUTO_MARK_READ=true
    networks:
      - whatsapp-network

  redis:
    image: redis:7-alpine
    container_name: redis-cache
    restart: always
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - whatsapp-network

volumes:
  whatsapp_data:
  redis_data:

networks:
  whatsapp-network:
    driver: bridge
```

---

## 七、数据存储

### 7.1 存储方案

| 数据类型 | 存储方式 | 加密 | 保留时间 |
|---------|---------|------|---------|
| 对话内容 | SQLite | ✅ AES-256 | 90天 |
| 客户档案 | JSON 文件 | ✅ AES-256 | 永久 |
| 操作日志 | 文件 | 脱敏 | 180天 |
| 媒体文件 | 本地存储 | ✅ 加密 | 7天 |

### 7.2 数据安全

```bash
# 1. 数据库加密
sqlite3 sales.db "PRAGMA key='your-encryption-key';"

# 2. 敏感日志脱敏
# 原始日志：
# [INFO] 客户 628123456789 发送: "我的密码是 abc123"

# 脱敏后：
# [INFO] 客户 ********6789 发送: "我的密码是 *****"

# 3. 访问控制
chmod 600 /data/sales.db
chown www-data:www-data /data/sales.db
```

---

## 八、风险合规

### 8.1 主要市场

**美国** 🇺🇸

### 8.2 风险评估

| 风险 | 等级 | 应对 |
|------|------|------|
| WhatsApp 封号 | 🟡 中 | 控制频率、真实使用 |
| 数据泄露 | 🟡 中 | 加密存储、访问控制 |
| 合规问题 | 🟢 低 | CCPA 简单声明 |

### 8.3 合规措施

#### 不需要 ❌
- ❌ 用户授权弹窗
- ❌ 复杂的同意记录
- ❌ 订阅/取消订阅
- ❌ 详细的隐私政策弹窗

#### 仍然需要 ✅
- ✅ 数据加密存储 (AES-256)
- ✅ 结构化日志（方便排查）
- ✅ 访问权限控制
- ✅ 定期备份
- ✅ 官网简单声明 (CCPA)
- ✅ 客户数据删除机制

### 8.4 CCPA 合规

```
只需要在官网/隐私页面说明：
- 我们收集哪些客户信息
- 如何保护这些信息
- 客户可以要求删除数据
```

---

## 九、监控运维

### 9.1 简单监控 ✅

| 监控项 | 方式 | 告警阈值 |
|--------|------|---------|
| GOWA 在线状态 | Health Check | 离线 > 5分钟 |
| 消息发送成功率 | 日志统计 | < 95% |
| 响应延迟 | Metrics | > 30秒 |
| API 错误率 | 日志 | > 5% |

### 9.2 运维原则 ✅

```
✅ 日志记录好 → 看日志就知道如何处理
✅ Linux 运维方案 → 有经验
✅ 简单告警 → 即时知道问题
✅ 定期备份 → 防止数据丢失
```

### 9.3 备份策略

| 数据 | 备份频率 | 保留时间 | 方式 |
|------|---------|---------|------|
| 对话历史 | 每天 | 30天 | 导出 JSON |
| 客户档案 | 每天 | 90天 | 导出 JSON |
| 系统配置 | 每次修改 | 永久 | Git |
| 媒体文件 | 每周 | 7天 | 清理 |

---

## 十、项目阶段

### 10.1 版本规划

| 版本 | 目标 | 时间 | 核心功能 |
|------|------|------|---------|
| **MVP** | 验证可行性 | 2周 | 消息收发、AI 回复 |
| **V1.0** | 完整功能 | 4周 | 销售流程、学习系统 |
| **V2.0** | 优化提升 | 8周 | 转化率、数据分析 |

### 10.2 MVP 核心功能

| 功能 | 优先级 | 说明 |
|------|--------|------|
| GOWA 部署 | P0 | Docker 部署，QR 码登录 |
| 消息接收 | P0 | Webhook 实时接收客户消息 |
| 消息发送 | P0 | AI 生成回复并发送 |
| AI 基础对话 | P0 | OpenClaw 处理简单咨询 |

### 10.3 V1.0 完整功能

- ✅ 销售阶段识别
- ✅ 客户档案管理
- ✅ 基础学习系统
- ✅ 数据分析

### 10.4 V2.0 优化提升

- ✅ 高级学习优化
- ✅ 转化率分析
- ✅ 营销自动化
- ✅ 报表系统

---

## 十一、成功标准

### 11.1 KPI 指标

| 阶段 | 指标 | 目标值 |
|------|------|--------|
| **MVP** | 消息收发成功率 | >95% |
| | AI 回复延迟 | <30秒 |
| | 系统稳定性 | 无崩溃 |
| **V1.0** | 转化率 | 提升 10-20% |
| | 客户满意度 | >4.0/5 |
| | 响应时间 | <5分钟 |
| **V2.0** | 转化率 | 提升 50%+ |
| | 自动化程度 | >70% |
| | ROI | 正向回报 |

### 11.2 团队协作

| 角色 | 职责 |
|------|------|
| 项目负责人 | 产品规划、决策 |
| 后端开发 | GOWA 集成、API 开发 |
| AI 工程师 | OpenClaw 集成、学习系统 |
| 运维工程师 | 部署、监控、备份 |

---

## 附录

### A. GOWA MCP 工具完整列表

详见：[GOWA 官方文档](https://github.com/aldinokemal/go-whatsapp-web-multidevice)

### B. OpenClaw Skills 开发

详见：[OpenClaw Skills 文档](https://docs.openclaw.ai/tools/skills)

### C. Docker 部署指南

详见：[部署指南](DEPLOYMENT.md)

### D. 运维手册

详见：[运维手册](OPERATIONS.md)

---

## 贡献者

- **JasonFang1993** - 项目创始人

## 许可证

MIT License - 详见 [LICENSE](LICENSE)

---

> 💡 **提示**：这是一个会学习、会成长的 AI 销售系统。随着对话数据的增加，它会越来越聪明，转化率会持续提升！
